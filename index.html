<!DOCTYPE html>
<html>
  <head>
    <title>Interactive AR with 3D Model</title>
    <!-- A-Frame library -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <!-- AR.js library -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.3.2/aframe/build/aframe-ar.js"></script>
    <!-- Gesture Detector Component -->
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-gesture-detector/v3.0.0/dist/aframe-gesture-detector.min.js"></script>
    <!-- Custom Script to Handle Gesture Interaction -->
    <script>
      AFRAME.registerComponent('gesture-handler', {
        schema: {
          enabled: {default: true},
          rotationFactor: {default: 5},
          scaleFactor: {default: 0.01}
        },
        init: function () {
          this.handleRotation = this.handleRotation.bind(this);
          this.handleScale = this.handleScale.bind(this);
          this.el.sceneEl.addEventListener('rotation', this.handleRotation);
          this.el.sceneEl.addEventListener('scale', this.handleScale);
        },
        handleRotation: function (event) {
          this.el.object3D.rotation.y += event.detail.rotation * this.data.rotationFactor;
        },
        handleScale: function (event) {
          this.el.object3D.scale.multiplyScalar(1 + event.detail.spreadChange * this.data.scaleFactor);
        }
      });
    </script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs>
      <!-- Marker -->
      <a-marker preset="custom" type="pattern" url="marker/qrcode.patt">
        <!-- 3D Model with Gesture Interaction -->
        <a-entity gltf-model="url(models/ruangtamu.glb)" 
                  scale="0.1 0.1 0.1" 
                  position="0 0 0"
                  gesture-handler>
        </a-entity>
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html>
